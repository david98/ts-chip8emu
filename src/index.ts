import { CPU } from './cpu'

window.addEventListener('load', () => {
    let rom = '124EEAAC AAEACEAA AAAEE0A0 A0E0C040 40E0E020 C0E0E060 20E0A0E0 20206040 2040E080 E0E0E020 2020E0E0 A0E0E0E0 20E040A0 E0A0E0C0 80E0E080 C080A040 A0A0A202 DAB400EE A202DAB4 13DC6801 69056A0A 6B01652A 662BA216 D8B4A23E D9B4A202 362BA206 DAB46B06 A21AD8B4 A23ED9B4 A206452A A202DAB4 6B0BA21E D8B4A23E D9B4A206 5560A202 DAB46B10 A226D8B4 A23ED9B4 A20676FF 462AA202 DAB46B15 A22ED8B4 A23ED9B4 A2069560 A202DAB4 6B1AA232 D8B4A23E D9B42242 6817691B 6A206B01 A20AD8B4 A236D9B4 A202DAB4 6B06A22A D8B4A20A D9B4A206 8750472A A202DAB4 6B0BA22A D8B4A20E D9B4A206 672A87B1 472BA202 DAB46B10 A22AD8B4 A212D9B4 A2066678 671F8762 4718A202 DAB46B15 A22AD8B4 A216D9B4 A2066678 671F8763 4767A202 DAB46B1A A22AD8B4 A21AD9B4 A206668C 678C8764 4718A202 DAB4682C 69306A34 6B01A22A D8B4A21E D9B4A206 668C6778 876547EC A202DAB4 6B06A22A D8B4A222 D9B4A206 66E0866E 46C0A202 DAB46B0B A22AD8B4 A236D9B4 A206660F 86664607 A202DAB4 6B10A23A D8B4A21E D9B4A3E8 60006130 F155A3E9 F065A206 4030A202 DAB46B15 A23AD8B4 A216D9B4 A3E86689 F633F265 A2023001 A2063103 A2063207 A206DAB4 6B1AA20E D8B4A23E D9B41248 13DC'.replace(
        /\s/g,
        ''
    )
    console.log(rom)
    let instructions = rom.match(/.{1,4}/g)
    let cpu = new CPU(document.getElementById('screen') as HTMLCanvasElement)
    cpu.loadROM(instructions)

    while (true) {
        cpu.clock()
    }
})
